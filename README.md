# Regression_Stock_Scan
(My first Python project) Web scrape stock data and run statistical analysis

Currently this project needs to be updated to work with a change in the Yahoo finance website. The code will fail to scrape the financials page from the website and fail. 

I want to describe the project I recently completed. I used Python to web-scrape a great deal of financial data from the stock market to perform a statistical analysis of stocks I will consider adding to my personal investment portfolio. My Python program scans and filters hundreds of thousands of rows of data, assigns a weighted score system, and returns to me with the top 20 stocks. The score system is predominantly a modified linear regression slope of the last 90 days of closing prices. I will briefly describe what I did.

To start I scan over 20,000 stocks on GuruFocus.com to gather all stocks between $15 and $100. Because I do not have that much money in my portfolio, I try to diversify as best I can by having low cost stocks.

I then take each stock to Yahoo Finance and plug the ticker into its server. Many of the securities on GuruFocus are not exactly 'real' and have little to no information on Yahoo Finance, so I remove these from my data frame.

Next, I take the filtered stocks and I collect price information on each stock from Yahoo Finance. I collect 90 days of open prices, close prices, the daily high, low, and the volume. In total I have over 284,000 rows of stock data in my data frame at this point. I keep my data temporarily stored in a pipe-delimited CSV file as I move from function to function in my Python script. That way if my code stops or has an issue getting a response from a server I can pick back up where I left off after re-starting my code.

Then I perform another level of screening. Using the data I collected on volumes, I find the mean volume and standard deviation for each of the stocks over the 90 day period. I find the Z-score of every stock and I filter-out any stock with a Z-score below a certain threshold (I keep tweaking it to get the best results).

Now that I've performed my last filtration I begin a new statistical analysis to assign my scores. At this point I have well over 50,000 stocks to look at. I get the linear regression slope of the last 90 days' closing prices. A relatively 'high' slope will mean the price has been trending upward the last 90 days. I tend to go with short-term trading as my personal investing strategy, so I only look at the recent past, then I will buy a stock with the intention to hold it for a few weeks at a minimum before I sell it.

I modify the linear regression slope by multiplying it by the r-squared value. The r-squared value is the correlation coefficient squared, which basically tells how well data points fit a regression line. The correlation coefficient and r-squared will help tell if the regression line has any explanatory power. Because the r-squared value has a maximum of one, when I multiply the slope by the r-squared value I effectively discount the slope of any regression lines with little explanatory power (if the r-squared value is miraculously 1 then the slope is maintained after being multiplied by 1). Thus I modify the slope to give lower scores to stocks with data that doesn't trend well.

My weighted score system is heavily focused on the modified regression slope. The modified slope is 85% of the score. The remaining 15% is a modified average revenue change over the past four years of the publicly traded company. What I do is get the year to year change in revenue over four years and average the change. I modify this value to smooth out the radical shifts in some companies' revenue and I discount any company that has less than four years of revenue history. Without getting into too much detail, I basically discount any radical upward swings in revenue. If a company's revenue fell by 90% then the absolute number of this change is .9. There are some companies who can more than triple, quadruple, and multiply one years revenue the next year by great numbers. So the maximum fall in revenue is -1, but the rise can be times 10 or even more. This distorts an averaging formula so I take steps to smooth it out.
